<template>
    <div class="container">
        <style>
            .table {
                table-layout: fixed;
                word-wrap: break-word;
            }
        </style>

        <div class="header clearfix">
            <h3 class="text-muted">Tickets</h3>
        </div>

        <div class="row marketing">
            <div if.bind="isAdd || isUpdate">
                <h4>${addOrEditTitle}</h4>
                <br>
                <form role="form">
                    <input type="hidden" value.bind="ticketId">
                    <label for="ticketName">Name</label><br/>
                    <input type="text" name="ticketName" value.bind="ticketName" class="form-control col-xs-12"><br/>

                    <label for="ticketDecription">Description</label><br/>
                    <textarea  name="ticketDescription" value.bind="ticketDescription" class="form-control col-xs-12" rows="7"></textarea>
                </form>
                <div>
                    <button type="button" class="btn btn-primary" click.delegate="doAdd()" if.bind="isAdd">Add</button>
                    <button type="button" class="btn btn-primary" click.delegate="doUpdate()" if.bind="isUpdate">Update</button>
                    <button type="button" class="btn btn-danger" click.delegate="cancelAddOrEdit()">Cancel</button>
                </div>
            </div>
            <button type="button" class="btn btn-success" click.delegate="addNew()" if.bind="!(isAdd || isUpdate)">New</button>
            <br/>
            <br/>
            <table class="table table-striped table-sm">
                <thead>
                <tr>
                    <th>Id</th>
                    <th>Name</th>
                    <th>Description</th>
                    <th>Status</th>
                    <th>Last Update</th>
                    <th>Operation</th>
                </tr>
                </thead>
                <tbody>
                <tr repeat.for="ticket of tickets">
                    <td>${ticket.id}</td>
                    <td>${ticket.name}</td>
                    <td>${ticket.description}</td>
                    <td>
                        <button type="button" class="btn btn-primary" click.delegate="edit(ticket.id, ticket.name, ticket.description)">Edit</button>
                        <button type="button" class="btn btn-danger" click.delegate="confirmWithDelete(ticket.id)">Delete</button>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
        <div class="row">
            <button type="button" class="btn btn-info" click.delegate="goToHome()">Back</button>
        </div>
        <footer class="footer">
            <br/>
            <p>© Marko Švaljek ${year}</p>
        </footer>

    </div>
</template>